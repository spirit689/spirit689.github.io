<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Settings</title>
        <script src="//static.parastorage.com/services/third-party/react/15.3.1/react-with-addons.min.js"></script>
        <script src="//static.parastorage.com/services/third-party/react/15.3.1/react-dom.min.js"></script>
        <script src="//static.parastorage.com/services/third-party/jquery/3.1.1/dist/jquery.min.js"></script>
        <script src="//static.parastorage.com/services/third-party/lodash/4.17.2/lodash.js"></script>
        <script src="//static.parastorage.com/services/js-sdk/1.87.0/js/wix.min.js"></script>
        <script src="//static.parastorage.com/services/editor-ui-lib/1.28.0/lib/editor-ui-lib-jquery.min.js"></script>
        <style>
            [wix-ctrl] {
                margin: 10px 15px;
            }
        </style>
        <script type="text/javascript">
            var Settings = function () {};

            Settings.prototype.updateData = function (key, val) {
                Wix.Settings.triggerSettingsUpdatedEvent({key: key, value: val});
            };

            Settings.prototype.attachListeners = function () {
                var $self = this;
                var textInputs = jQuery('.text-input-field');
                textInputs.each(function (index, element) {
                    jQuery(element).getCtrl().onButtonClick(function (data) {
                        $self.updateData(jQuery(element).attr('wix-param'), data);
                    });
                });
            }

            var settings = new Settings();

            jQuery(document).ready(function() {
                settings.attachListeners();
            });
        </script>
    </head>
    <body>
        <div wix-ctrl="appSettings"></div>
        <div id="sampleDock" wix-ctrl="Dock"
            wix-param="widgetPos"
            wix-options="{title: 'Select position', defaultValue:'TOP_RIGHT'}">
        </div>
        <div id="textInputExpand"
             wix-ctrl="TextInputWithButton"
             wix-param="classExpand"
             wix-options="{
             title: 'HTML',
             placeholder:'Your text',
             infoText:'',
             invalidMessage:'Wrong Input!',
             defaultText:'Widget text',
             maxLength:512,
             buttonText: 'OK'}">
        </div>
        <div id="textInputRestore"
             wix-ctrl="TextInputWithButton"
             wix-param="classRestore"
             wix-options="{
             title: 'HTML',
             placeholder:'Your text',
             infoText:'',
             invalidMessage:'Wrong Input!',
             defaultText:'Widget text',
             maxLength:512,
             buttonText: 'OK'}">
        </div>
        <div id="textInputCode"
             wix-ctrl="TextInputWithButton"
             wix-param="textCode"
             wix-options="{
             title: 'HTML',
             placeholder:'Your text',
             infoText:'',
             isMultiLine: 'true',
             invalidMessage:'Wrong Input!',
             defaultText:'Widget text',
             maxLength:512,
             buttonText: 'OK'}">
        </div>
    </body>
</html>
